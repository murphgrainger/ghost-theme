<!DOCTYPE html>
<html lang="{{@site.locale}}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{meta_title}}</title>
    <link rel="stylesheet" href="{{asset "built/screen.css"}}">

    {{!-- immediately load dark mode --}}
    <script>
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
    </script>

    {{ghost_head}}
</head>

<body id="theme-body" class="{{body_class}} is-head-{{#match @custom.navigation_layout " Logo on the
    left"}}left-logo{{else match @custom.navigation_layout "Logo in the middle"
    }}middle-logo{{else}}stacked{{/match}}{{#match @custom.title_font "=" "Elegant serif" }}
    has-serif-title{{/match}}{{#match @custom.body_font "=" "Elegant serif" }} has-serif-body{{/match}}">
    <div class="gh-site">

        <header id="gh-head" class="gh-head gh-outer">
            <div class="gh-head-inner gh-inner">
                <div class="gh-head-brand">
                    <div class="gh-head-brand-wrapper">
                        <a class="gh-head-logo" href="{{@site.url}}">
                            {{#if @site.logo}}
                            <img src="{{@site.logo}}" alt="{{@site.title}}">
                            {{else}}
                            {{@site.title}}
                            {{/if}}
                        </a>
                    </div>
                    <div id="nightshift-toggle-container">
                        <div id="nightshift-toggle" class="nightshift-toggle " data-ember-action=""
                            data-ember-action-27="27">
                            <div class="sun"><svg viewBox="0 0 24 24">
                                    <defs>
                                        <style>
                                            .sun_svg__a {
                                                fill: none;
                                                stroke: currentColor;
                                                stroke-linecap: round;
                                                stroke-linejoin: round;
                                                stroke-width: 1.5px
                                            }
                                        </style>
                                    </defs>
                                    <circle class="sun_svg__a" cx="12" cy="12" r="4.5"></circle>
                                    <path class="sun_svg__a"
                                        d="M12 .75V4.5m0 15v3.75M23.25 12H19.5m-15 0H.75m19.5-8.25l-3 3m-10.5 10.5l-3 3m16.5 0l-3-3M6.75 6.75l-3-3">
                                    </path>
                                </svg></div>
                            <div class="moon"><svg viewBox="0 0 24 24">
                                    <path
                                        d="M12.248 11.959A11.254 11.254 0 004.373 1.226a11.25 11.25 0 110 21.466 11.253 11.253 0 007.875-10.733z"
                                        fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="1.5" fill-rule="evenodd"></path>
                                </svg></div>
                            <div class="thumb"></div>
                        </div>
                    </div>
                    <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search>{{>
                        "icons/search"}}</button>
                    <button class="gh-burger"></button>
                </div>

                <nav class="gh-head-menu">
                    {{navigation}}
                    {{#unless @site.members_enabled}}
                    {{#match @custom.navigation_layout "Stacked"}}
                    <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search>{{>
                        "icons/search"}}</button>
                    {{/match}}
                    {{/unless}}
                </nav>

                <div class="gh-head-actions">
                    {{#unless @site.members_enabled}}
                    {{^match @custom.navigation_layout "Stacked"}}
                    <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search>{{>
                        "icons/search"}}</button>
                    {{/match}}
                    {{else}}
                    <div class="gh-head-members">
                        <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search>{{>
                            "icons/search"}}</button>
                        <div id="nightshift-toggle-container">
                            <div id="nightshift-toggle" class="nightshift-toggle " data-ember-action=""
                                data-ember-action-27="27">
                                <div class="sun"><svg viewBox="0 0 24 24">
                                        <defs>
                                            <style>
                                                .sun_svg__a {
                                                    fill: none;
                                                    stroke: currentColor;
                                                    stroke-linecap: round;
                                                    stroke-linejoin: round;
                                                    stroke-width: 1.5px
                                                }
                                            </style>
                                        </defs>
                                        <circle class="sun_svg__a" cx="12" cy="12" r="4.5"></circle>
                                        <path class="sun_svg__a"
                                            d="M12 .75V4.5m0 15v3.75M23.25 12H19.5m-15 0H.75m19.5-8.25l-3 3m-10.5 10.5l-3 3m16.5 0l-3-3M6.75 6.75l-3-3">
                                        </path>
                                    </svg></div>
                                <div class="moon"><svg viewBox="0 0 24 24">
                                        <path
                                            d="M12.248 11.959A11.254 11.254 0 004.373 1.226a11.25 11.25 0 110 21.466 11.253 11.253 0 007.875-10.733z"
                                            fill="none" stroke="currentColor" stroke-linecap="round"
                                            stroke-linejoin="round" stroke-width="1.5" fill-rule="evenodd"></path>
                                    </svg></div>
                                <div class="thumb"></div>
                            </div>
                        </div>
                    </div>
                    <div class="gh-head-members">
                        {{#unless @member}}
                        {{#unless @site.members_invite_only}}
                        <a class="gh-head-link" href="#/portal/signin" data-portal="signin">Sign In</a>
                        <a class="gh-head-btn gh-btn gh-primary-btn" href="#/portal/signup" data-portal="signup">{{>
                            "icons/email"}} Subscribe</a>
                        {{else}}
                        <a class="gh-head-btn gh-btn gh-primary-btn" href="#/portal/signin" data-portal="signin">Sign
                            In</a>
                        {{/unless}}
                        {{else}}
                        <a class="gh-head-btn gh-btn gh-primary-btn" href="#/portal/account"
                            data-portal="account">Account</a>
                        {{/unless}}
                    </div>
                    {{/unless}}
                </div>
            </div>
        </header>

        {{{body}}}

        {{^is "page"}}
        {{#if @site.members_enabled}}
        {{#unless @member}}
        <div class="gh-subscribe">
            <div class="gh-outer">
                <section class="gh-subscribe-inner">
                    <h3 class="gh-subscribe-title">Subscribe</h3>
                    <div class="gh-subscribe-description">Receive an email when a new entry is published.
                        Unsubscribe at any time.</div>
                    <a class="gh-subscribe-input" href="#/portal/signup" data-portal="signup">
                        <div class="gh-subscribe-input-text">
                            {{> icons/email}}
                            jamie@example.com
                        </div>
                        <div class="gh-subscribe-input-btn">Subscribe</div>
                    </a>
                </section>
            </div>
        </div>
        {{/unless}}
        {{/if}}
        {{/is}}

        <footer class="gh-foot{{#unless @site.secondary_navigation}} no-menu{{/unless}} gh-outer">
            <div class="gh-foot-inner gh-inner">
                <div class="gh-copyright">
                    {{@site.title}} Â© {{date format="YYYY"}}
                </div>
                {{#if @site.secondary_navigation}}
                <nav class="gh-foot-menu">
                    {{navigation type="secondary"}}
                </nav>
                {{/if}}
                <div class="gh-powered-by">
                    <a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a>
                </div>
            </div>
        </footer>

    </div>

    {{#is "post, page"}}
    {{> "pswp"}}
    {{/is}}

    <script src="{{asset "built/main.min.js"}}"></script>

    <script>
        // Function to set the dark-mode theme
        function setTheme(theme) {
            localStorage.setItem('theme', theme);

            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            } else {
                document.documentElement.removeAttribute('data-theme');
            }
        }

        // Toggle dark-mode theme
        document.addEventListener('DOMContentLoaded', () => {
            const nightShiftToggleElements = document.querySelectorAll('.nightshift-toggle');
            nightShiftToggleElements.forEach(elem => {
                elem.addEventListener('click', function () {
                    const currentTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark'; // <-- Changed here
                    setTheme(currentTheme);
                    const commentIframe = document.querySelector("#ghost-comments-root iframe:first-of-type");
                    if (commentIframe) {
                        const src = commentIframe.src;
                        const srcdoc = commentIframe.getAttribute('srcdoc');
                        commentIframe.setAttribute('srcdoc', ''); // Set to empty
                        commentIframe.setAttribute('srcdoc', srcdoc);
                    }
                });
            });
        });
    </script>



    {{ghost_foot}}

</body>

</html>